{"version":3,"file":"cell-8gZlr81z.js","sources":["../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/classApplyDescriptorSet.js","../../node_modules/.pnpm/@babel+runtime@7.23.2/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet.js","../src/core/cell.ts"],"sourcesContent":["export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}","import classApplyDescriptorSet from \"./classApplyDescriptorSet.js\";\nimport classExtractFieldDescriptor from \"./classExtractFieldDescriptor.js\";\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}","import { tracked } from '@glimmer/tracking';\nimport { assert } from '@ember/debug';\n\nexport class ReadonlyCell<Value> implements Reactive<Value> {\n  #getter: () => Value;\n\n  constructor(getter: () => Value) {\n    this.#getter = getter;\n  }\n\n  toHTML(): string {\n    assert(\n      'Not a valid API. Please access either .current or .read() if the value of this Cell is needed',\n    );\n  }\n\n  get [CURRENT](): Value {\n    return this.current;\n  }\n\n  get current(): Value {\n    return this.#getter();\n  }\n}\n\nexport class Cell<Value = unknown> implements Reactive<Value> {\n  @tracked declare current: Value;\n\n  get [CURRENT](): Value {\n    return this.current;\n  }\n\n  toHTML(): string {\n    assert(\n      'Not a valid API. Please access either .current or .read() if the value of this Cell is needed',\n    );\n  }\n\n  constructor();\n  constructor(initialValue: Value);\n  constructor(initialValue?: Value) {\n    if (initialValue !== undefined) {\n      this.current = initialValue;\n    }\n  }\n\n  /**\n   * Toggles the value of `current` only if\n   * `current` is a boolean -- errors otherwise\n   */\n  toggle = () => {\n    assert(\n      `toggle can only be used when 'current' is a boolean type`,\n      typeof this.current === 'boolean' || this.current === undefined,\n    );\n\n    (this.current as boolean) = !this.current;\n  };\n\n  /**\n   * Updates the value of `current`\n   * by calling a function that receives the previous value.\n   */\n  update = (updater: (prevValue: Value) => Value) => {\n    this.current = updater(this.current);\n  };\n\n  /**\n   * Updates the value of `current`\n   */\n  set = (nextValue: Value) => {\n    this.current = nextValue;\n  };\n\n  /**\n   * Returns the current value.\n   */\n  read = () => this.current;\n}\n\n/**\n * <div class=\"callout note\">\n *\n * This is not a core part of ember-resources, but is a useful utility when working with Resources. This utility is still under the broader library's SemVer policy. Additionally, the \"Cell\" is a core concept in Starbeam. See [Cells in Starbeam](https://www.starbeamjs.com/guides/fundamentals/cells.html)\n *\n * </div>\n *\n *\n * Small state utility for helping reduce the number of imports\n * when working with resources in isolation.\n *\n * The return value is an instance of a class with a single\n * `@tracked` property, `current`. If `current` is a boolean,\n * there is a `toggle` method available as well.\n *\n * For example, a Clock:\n *\n * ```js\n * import { resource, cell } from 'ember-resources';\n *\n * const Clock = resource(({ on }) => {\n *   let time = cell(new Date());\n *   let interval = setInterval(() => time.current = new Date(), 1000);\n *\n *   on.cleanup(() => clearInterval(interval));\n *\n *   let formatter = new Intl.DateTimeFormat('en-US', {\n *     hour: 'numeric',\n *     minute: 'numeric',\n *     second: 'numeric',\n *     hour12: true,\n *   });\n *\n *   return () => formatter.format(time.current);\n * });\n *\n * <template>\n *   It is: <time>{{Clock}}</time>\n * </template>\n * ```\n *\n * Additionally, cells can be directly rendered:\n * ```js\n * import { resource, cell } from 'ember-resources';\n *\n * const value = cell(0);\n *\n * <template>\n *    {{value}}\n * </template>\n * ```\n *\n */\nexport function cell<Value = unknown>(initialValue?: Value): Cell<Value> {\n  if (initialValue !== undefined) {\n    return new Cell(initialValue as Value);\n  }\n\n  return new Cell();\n}\n\n// @ts-ignore\nimport { capabilities as helperCapabilities, setHelperManager } from '@ember/helper';\n\nimport { CURRENT } from './function-based/types';\n\nimport type { GlintRenderable, Reactive } from './function-based/types';\n\nclass CellManager {\n  capabilities = helperCapabilities('3.23', {\n    hasValue: true,\n  });\n\n  createHelper(cell: Cell) {\n    return cell;\n  }\n\n  getValue(cell: Cell) {\n    return cell.current;\n  }\n}\n\nconst cellEvaluator = new CellManager();\n\nsetHelperManager(() => cellEvaluator, Cell.prototype);\nsetHelperManager(() => cellEvaluator, ReadonlyCell.prototype);\n"],"names":["_classApplyDescriptorSet","receiver","descriptor","value","set","call","writable","TypeError","_classPrivateFieldSet","privateMap","classExtractFieldDescriptor","classApplyDescriptorSet","_getter","WeakMap","ReadonlyCell","constructor","getter","_classPrivateFieldInitSpec","toHTML","assert","CURRENT","current","_classPrivateFieldGet","Cell","_class2","initialValue","_initializerDefineProperty","_descriptor","_defineProperty","undefined","updater","nextValue","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","initializer","cell","CellManager","helperCapabilities","hasValue","createHelper","getValue","cellEvaluator","setHelperManager"],"mappings":"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","x_google_ignoreList":[0,1]}